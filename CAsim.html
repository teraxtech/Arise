<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
	html{
		height: 100%;
	}
	body{
		margin:0px;
	}
	#title{
		background-color:#555;
		width:100%;
		height:40px;
		overflow:hidden;
		display:block;
		text-decoration: none;
		padding:0px;
	}
	#link{
		text-decoration: none;
		padding:0px;
		width:180px;
		margin: 10px 10px;
		display:block;
	}
	h3{	
    	color:#fff;
    	margin: 0px;
	}
	canvas{
		background-color: #f1f1f1;
		display:inline-block;
		float:left;
		margin-bottom: 10px;
		margin-right:10px;
	}
	.borderColor{
		border-color: #bbb;
	}
	table{
		border: none;
		border-collapse: collapse;
	}
	.line{
		border: none;
		border-collapse: collapse;
	}
	#line>td>input{
		margin:4px 0px;
	}
	#top{
		display:inline-block;
	}
	#top>div{
		display:flex;
	}
	#top>div>*{
		margin-top:0px;
		margin-bottom:27px;
	}
	#top>div>*:not(:first-child){
		margin-left:auto;
	}
	#top>div>*:not(:last-child){
		margin-right:auto;
	}
	#bottom{
		max-width:500px;
	}
	input{
		border-style: solid;
		border-width: 1px;
	}
	#rleArea{
		margin:0px auto;
	}
	button{
		height:30px;
		background-color:#f1f1f1;
		border:1px solid #000;
		padding-top:5px;
	}
	button:active{
		outline:1px solid;
	}
	button:hover{
		background-color:#ddd;
	}
	#Button0{
		outline: 1px solid #000;
		display:flex;
		justify-content: space-between;
	}
	#draw{
		border-right:none;
	}
	#undo{
		width: 170px;
		display: flex;
		justify-content: space-between;
	}
	#mbtn{
		margin:5px 0px;
		display: inline;
		outline:none;
	}
	#menu1{
		margin:0px 5px;
		padding: 8px;
		display: none;
		width:auto;
		border:1px solid;
	}
	.tab{
		margin-left: 15px;
	}
	.spaceUnder{
		margin-bottom:10px;
	}
	#arrow1{
		display: inline;
	}
	#big{
		margin: 5px;
		float: right;
	}
	#percent{
		display: inline-block;
		width: 40px;
	}
	#gens{
		margin: 4px 0px;
	}
	#error{
		height: 20px;
		color: #f00;
		background-color:#fff;
	}
	
	#dropdown {
	  position: relative;
	  display: inline-block;
	}
	
	#dropbtn {
		min-width:50px;
		padding:6px 8px;
	}
	
	#dropdown-content {
	  display: none;
	  width:100%;
	  min-width:50px;
	  position: absolute;
	  background-color: #f9f9f9;
	  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	}
	
	#dropdown-content div {
	  color: black;
	  padding: 6px 8px;
	  text-decoration: none;
	  display: block;
	  border:1px solid black;
	}
	
	#dropdown:hover #dropdown-content {
	  display: block;
	}
	#dropdown-content div:hover{
		background-color:#ddd;
	}
	#rule,#zoom,#pause{
		float:right;
	}
</style>
</head>
<body>
<div id="title">
	<a id="link" href="../../">
		<h3>Silver Simulations</h3>
	</a>
</div>
<div id="content">
	<canvas oncontextmenu="return false" id="ourCanvas" tabindex="1"></canvas>

	<div id="top">
		<div>
			<div id="Button0">
				<button id="draw" onclick="draw()">Draw</button>
				<div id="dropdown">
				  <button id="dropbtn">Auto</button>
				  <div id="dropdown-content">
					<div onclick="drawState(0)">0</div>
					<div onclick="drawState(1)">1</div>
				  </div>
				</div>
			</div>
			<button id="Button1" onclick="move()">Move</button>
			<button onclick="fitView()">Fit View</button>
			<button onclick="setDark()">DarkMode</button>
		</div>
		<div>
			<button onclick="start()">Start/Stop</button>
			<button onclick="next()">Next Generation</button>
			<button onclick="rand()">Randomize</button>
		</div>
		<div>
			<button id="Button2" onclick="select()">Select</button>
			<button onclick="copy()">Copy</button>
			<button onclick="cut()">Cut</button>
			<button onclick="paste()">Paste</button>
			<button onclick="clearGrid()">Clear</button>
		</div>
		<div>
			<div id="gens">Generation 0.</div>
			<div id="undo">
				<button onclick="undo()">Undo</button>
				<button onclick="redo()">Redo</button>
				<button onclick="restart()">Restart</button>
			</div>
		</div>
	</div>
	<br>
	<input type="checkbox" id="xloop" onclick="s.p=0;addMargin();render();">Horizonal Loop
	<input type="checkbox" id="yloop" onclick="s.p=0;addMargin();render();">Vertical Loop
	<br>

	<div id="error"></div>
	<div id="bottom">
		<table>
			<tr class="line">
				<td><div class="spaceUnder">Zoom</div></td>
				<td><input type="text" id="zoom" placeholder="ratio(decimal)" class="spaceUnder"></td>
			</tr>
			<tr class="line">
				<td>Rule</td>
				<td><input type="text" id="rule" placeholder="S#/B#/G#"></td>
			</tr>
			<!--<tr class="line ">
				<td>Interval Between Updates</td>
				<td><input type="text" id="interval" placeholder="time(ms)"></td>
			</tr>-->
			<tr class="line">
				<td>Generations Per Update</td>
				<td><input type="text" id="step" placeholder="integer(eg. 1,3,20)"></td>
			</tr>
		</table>

		<button onclick="menu(1)" id="mbtn"><div id="arrow1">&#x27A1;</div> Advanced Menu:</button>
		<div id="menu1" class="borderColor">
			<button onclick="toggleLines()">Toggle Grid Lines</button>
			<br><b>Randomize Options</b>
			<div class="tab">
				<br>Density of Live Cells:
				<br><div id="percent">50%</div><input type="range" min="0" max="100" value="50" id="density">
				<br>Symmetries:
				<br><input type="radio" name="symmetries" id="c1" checked>C1
				<br><input type="radio" name="symmetries" id="d4">D_4+
			</div>
			<br><b>Search Options:</b>
			<div class="tab">
				<br>Restart when the grid has a period of:
				<br><input type="text" id="restart" placeholder="eg. 2,6,9">
				<br>Export and restart when the grid has a period of:
				<br><input type="text" id="export" placeholder="eg. 2,3,8">
			</div>
			<p>*I reccomend turning on the vertical and horizonal loop options when
			searching in a rule with spaceships</p>
		</div>
		<button id="big" onclick="save()">Save Changes</button>
	</div>
	<br>
	<br>
	<br>

	<div id="rleArea">
		<button onclick="importRLE()">Import RLE</button>
		<button onclick="exportRLE()">Export RLE</button>
		<button onclick="clearRLE()">Clear</button>
		<button onclick="copyRLE()">Copy</button>
		<br>
		<textarea id="rle" rows="10" cols="36"></textarea>
	</div>

	<p>This is a simulator for outer-totalistic, generations, and non-isotropic 
	rules made with HTML5, CSS, and Javascript. </p>

	<p>When in select mode, select an area by clicking then dragging the edges.
	Randomize, clear, and copy will only affect the highlighted area. Clicking
	paste once will show you the copied pattern and clicking paste again will
	place the pattern. Restart will put the simulation in the state before it was played.</p>

	<p>Keyboard Controls:</p>
	<div class="tab">
	<p>Space to start/stop</p>
	<p>[n] to play next generation</p>
	<p>Arrow Keys to navigate</p>
	<p>Delete to clear</p>
	<p>[i] to zoom in</p>
	<p>[o] to zoom out</p>
	<p>[d] to enter draw mode</p>
	<p>[m] to enter move mode</p>
	<p>[s] to enter select mode</p>
	<p>Ctrl-[x] to cut</p>
	<p>Ctrl-[c] to copy</p>
	<p>Ctrl-[v] to paste</p>
	</div>
</div>
<script src="CAsim.js"></script>
</body>
</html>